!function(t){t.fn.glichtxt=function(e){return e=t.extend({rotate:!0,rotateforce:2,scaling:!0,scaleforce:3,heightoffset:18,glitchforce:3,blend:8},e),this.each(function(){function o(t,e,o,i,n,a){t.fillStyle=s,t.fillRect(0,0,x.width,x.height);for(var r=e.split(" "),c="",l=0;l<r.length;l++){var h=c+r[l]+" ",d=t.measureText(h),g=d.width;g>n&&l>0?(t.fillStyle=f,t.textAlign="left",t.fillText(c,o,i),c=r[l]+" ",i+=a):c=h}t.fillStyle=f,t.fillText(c,o,i)}function i(){m.height=x.height,m.width=x.width,y.height=x.height,y.width=x.width,w.drawImage(x,0,0),n(),w.globalCompositeOperation=r[e.blend],e.scaling&&w.setTransform(a(0,e.scaleforce),0,0,a(0,e.scaleforce),0,0),e.rotate&&(w.translate(m.width/2,m.width/2),w.rotate(a(e.rotateforce,e.rotateforce)*Math.PI/180),w.translate(-m.width/2,-m.width/2)),w.drawImage(y,a(0,e.heightoffset),a(-e.heightoffset,e.heightoffset)),window.requestAnimationFrame(i)}function n(){for(var t=a(-e.glichforce,e.glichforce),o=0;t>o;o++){var i=Math.random()*C,n=Math.random()*b,r=C-i,c=a(5,b/3);I.drawImage(x,0,n,r,c,i,n,r,c),I.drawImage(x,r,n,i,c,0,n,i,c)}}function a(t,e){return Math.random()*(e-t)+t}var r=["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","copy","xor","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],c=t(this),l=c.css("font-size").replace(/[^-\d\.]/g,""),h=(c.css("padding-top").replace("px",""),c.css("padding-left").replace("px","")),s=c.css("background-color"),d=c.css("font-family"),f=c.css("color"),g=parseInt(c.css("line-height"),10),u=c.text(),p="",m=document.createElement("canvas"),w=m.getContext("2d"),x=document.createElement("canvas"),v=x.getContext("2d"),y=document.createElement("canvas"),I=y.getContext("2d"),b=c.height()+parseInt(l)+g,C=c.width(),M=C;x.width=C,x.height=b;var T=parseInt(h),E=parseInt(l);v.font=l+"px "+d,o(v,u,T,E,M,g),i(),c.text(p),c.append(m)}),this}}(jQuery);
